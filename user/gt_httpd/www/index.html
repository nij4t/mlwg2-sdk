<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
	<head>
		<meta charset="utf-8">
		<meta http-equiv="Cache-Control" CONTENT="no-cache">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<title></title>
		<meta name="description" content="">
		<meta name="viewport" content="width=device-width">

		<link rel="stylesheet" href="css/normalize.css">
		<link rel="stylesheet" href="css/main.css">
 		<script src="js/modernizr-2.6.2.min.js"></script>
		<script src="js/jquery-1.8.3.min.js"></script>
		<script src="js/jquery.lightbox_me.js"></script>

		<script type="text/javascript">
			$(document).ready(function () {

				// Open settings panel in lightbox
				$('.btn-settings').on('click', function (e) {
					$('#settings').lightbox_me();
					e.preventDefault();
				});

				// Change description for visibility option
				$('#ImageVisability').on('change', function () {
					if ($('#ImageVisability').is(':checked', true)) {
						$('.cbx-visibility').text('<%GetString("kindex","11");%>');
					} else {
						$('.cbx-visibility').text('<%GetString("kindex","10");%>');
					}
				});

				// Show password fields to set up secure connection
				$('#SecurityMode').on('change', function () {
					if ($(this).val() == '0') {
						$('.security-password').hide(200);
					} else {
						$('.security-password').show(200);
					}
				});

				// Show password field to connect to secure network
				$('#ddl-network').on('change', function () {
					if ($(this).val().indexOf('_pw') >= 0) {
						$('.network-password').show(200);
					} else {
						$('.network-password').hide(200);
					}
				});
				
				// INIT
				//$('#ImageVisability, #ddl-security, #ddl-network').trigger('change');
			});
			// If using ajax use pageLoad() instead of document.ready
    </script>
	<script language="JavaScript">
<!--
var userAgent = window.navigator.userAgent.toLowerCase();

var lanip = '<%NvramGet("LanIPAddr");%>';	
var getSortmod= '<%NvramGet("sortmod");%>';
var changelistmod = '<%NvramGet("changelistmode");%>';
var usb_default_path = '<%NvramGet("usb_default_path");%>';
var RecefileInfo= new Array();
RecefileInfo = [<%ShowFileInfo();%>];	

//ie 
if (userAgent.indexOf("msie 8") >0 || userAgent.indexOf("msie 7") >0 || userAgent.indexOf("msie 6") >0 ){		
	if (RecefileInfo.length>1){	
		var RecefileInfolen = (RecefileInfo.length)-1;		
	}
	else{
		var RecefileInfolen = RecefileInfo.length;			
	}
}
else{
		var RecefileInfolen = RecefileInfo.length;		
	}  

var count_check = 0;
var tmp2;
var aa = new Array();
var count_check = 0;

function create_table_plan()
{
	var getname = '<%GetString("showfile","1");%>';
	var gettype = '<%GetString("showfile","2");%>';
	var getsize = '<%GetString("showfile","3");%>';
	var getTimeword = '<%GetString("showfile","4");%>';
	var filePath_tmp = document.getElementById("locationPath").value;
	
	var table = new Array();	
	
	if (changelistmod=="mode_list")
	{	
			//table.push("<div style=\"width:100%;height:100%;overflow:auto;overflow-x:hidden;\" >");
			//table.push("<table style=\"width:100%\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\">");
			table.push("<ul class='drive-content'>");
			if (filePath_tmp != "/")
			{
				table.push("<li><a href=\"#\" id=\"back_butten\" onClick=\"back_folder();\"><div class='content-icon icn-back'></div><h2>Back to Devices</h2></a></li>");
			}
			for(var i=0;i<aa.length;i++)
			{			
					table.push(addIcon(i));
					//table.push("<tr>"+checkPicture(i)+"<td colspan=2 height=25px style=\"width:65%\" >"+addIcon(i)+"");
					//table.push("<td style=\"width:15%\" class=\"word_01\">"+aa[i][2]+"</td>"); //file size
					//table.push("<td style=\"width:15%\" class=\"word_01\">"+aa[i][7]+"</td></tr>"); //file time
					//table.push("<tr><td height=\"2\" colspan=\"6\" align=\"center\" valign=\"middle\"><img src=\"/images/line.jpg\" width=\"780px\" height=\"2\" /></td></tr>");
			}		
			table.push("</ul>");
		  //table.push("</table>");	
		  //table.push("</div>");	
			document.getElementById("show_table").innerHTML = table.join("");
	}
	document.getElementById("count_check").value = count_check;
}

function checkPicture(i)
{
	var filenames = SpecSymbol1(aa[i][0]);
	filenames = filenames.toLowerCase()
		
	var checkFolder = aa[i][1];
	if(checkFolder.charAt(0) != 'd')
	{
		count_check = count_check +1;
			
		return "<td width=\"5%\"></td>"
	}
	else{
		return "<td width=\"5%\" class=\"checkboxPath\"></td>"	
	}
}

function showCheckboxP1(obj) {
  
    if(obj.src.indexOf("select_01") != -1) {
        document.getElementById(obj.id).src = "/images/select_02.png";
		document.getElementById(obj.id.replace("checkbox2", "checkbox")).checked = true;
    }else {
        document.getElementById(obj.id).src = "/images/select_01.jpg";
        document.getElementById(obj.id.replace("checkbox2", "checkbox")).checked = false;
    }
    enableDownload()
}
function enableDownload()
{
	var downloadMask = parent.document.getElementById("PlayCheckMod").value;
	var tmp = 0;
	var checkValue=0;
	for(var a=0;a<count_check;a++)
	{
			var tmp_check = eval("document.getElementById(\"checkbox_"+(a+1)+"\").checked");
			if(tmp_check == true)
			{		
				tmp = 1;
				checkValue = a;				
				break;
			}			
	}

	if (tmp == 0 && downloadMask == "cancel")
	{
		parent.undowloadMask("select");
		
		/*document.getElementById("checkbox").disabled = true;
		for(var a=0;a<count_check;a++){
			if (a != checkValue){
				eval("document.getElementById(\"checkbox_"+(a+1)+"\").disabled = true");				
			}			
		}*/				
	}
	if(tmp == 1 && downloadMask == "cancel")
	{
		parent.undowloadMask("cancel");		
		/*document.getElementById("checkbox").disabled = false;
		for(var a=0;a<count_check;a++){
				eval("document.getElementById(\"checkbox_"+(a+1)+"\").disabled=false");				
		}*/
	}
}

function file_size_unit(size)
{
	size_unit = new Array('B','KB','MB','GB','TB','PB','EB','ZB','YB');
	flag = 0;
	
	while(size>=1024){
		size=size/1024;
		flag++;
	}
	size=Math.round(size*100)/100.00
	var count = size+" "+size_unit[flag]
	return count
	
}

function filesort()
{

	var noknowfile = new Array();
	var folderfile = new Array();
	var filearray = new Array();
	var month_source = {"Jan":"1","Feb":"2","Mar":"3","Apr":"4","May":"5","Jun":"6",
              			"Jul":"7","Aug":"8","Sep":"9","Oct":"10","Nov":"11","Dec":"12"};
  
  var checktype = [".jpg",".png",".bmp",".gif",".tiff",".mp3",".wma",".wav",".aiff",".aac",".m4v",
							   ".mp4",".mpeg",".jpg",".mov",".wmv",".motion",".jpeg",".txt",".jpeg",".txt",
							   ".log",".pdf",".doc",".docx",".xls",".xlsx",".ppt",".pptx",".iwork",".avi",
							   ".tif",".aif",".3gp",".eps",".m4a",".mpg"];
  
	for (var i=0;i<RecefileInfolen;i++)
	{	
		var typevalue = "unknow";	
		var foldermod = RecefileInfo[i][1];			
		var filenames = SpecSymbol1(RecefileInfo[i][0]);
		var tmp_month = month_source[RecefileInfo[i][4]];		
		var tmp_day = RecefileInfo[i][5];		

		var typename = filenames.substring(filenames.lastIndexOf("."),filenames.length).toLowerCase() ;
	
		for(var a=0;a<=checktype.length;a++)
		{		
			if(typename == checktype[a]){
				typevalue="file";
				break;
			}		
		}
		
		if (parseInt(tmp_month)<10)
		{
			var tmp_month = "0"+	tmp_month;
		}
		else{
				var tmp_month = tmp_month;
		}
		if (parseInt(tmp_day)<10)
		{
			var tmp_day = "0"+	tmp_day;
		}
		else{
				var tmp_day = tmp_day;
		}					
		var filetime = RecefileInfo[i][3]+'-'+ tmp_month+'-'+ tmp_day;	
		RecefileInfo[i].push(filetime);	
		
		if(foldermod.charAt(0) == 'd')
		{
			RecefileInfo[i][2]="";
			folderfile.push(RecefileInfo[i]);			
		}
		if (foldermod.charAt(0) != 'd' && typevalue == "unknow")
		{
			noknowfile.push(RecefileInfo[i]);			
		}
		if (foldermod.charAt(0) != 'd' && typevalue == "file")
		{
			filearray.push(RecefileInfo[i]);			
		}
		
	}
	
	//sort folderfile
	for(var i=0;i<folderfile.length;i++)
	{			
		folderfile[i][2] = "";	
		var tep1 = SpecSymbol1(folderfile[i][0]).toLowerCase();			
		
		for(var j=0;j<i;j++)
		{
			var tep2 = SpecSymbol1(folderfile[j][0]).toLowerCase();		
			
			if (tep1 < tep2)	
			{
				tmp2 = folderfile[i];
				folderfile[i] = folderfile[j];	
				folderfile[j] = tmp2;	
			}	
		}
	}
	
	
	if (getSortmod == "file_type")
	{						
	
		//sort noknowfile
		for(var i=0;i<noknowfile.length;i++)
		{			
			var tep1 = SpecSymbol1(noknowfile[i][0]);			
			for(var j=0;j<i;j++)
			{
				var tep2 = SpecSymbol1(noknowfile[j][0]);		
				if (tep1 < tep2)	
				{
					tmp2 = noknowfile[i];
					noknowfile[i] = noknowfile[j];	
					noknowfile[j] = tmp2;	
				}	
			}
		}		
		//sort filearray
		for(var i=0;i<filearray.length;i++)
		{			
			var tep1 = SpecSymbol1(filearray[i][0]);
			tep1 = tep1.substring(tep1.lastIndexOf("."),tep1.length).toLowerCase();		
			
			for(var j=0;j<i;j++)
			{
				var tep2 = SpecSymbol1(filearray[j][0]);		
				tep2 = tep2.substring(tep2.lastIndexOf("."),tep2.length).toLowerCase();		
				if (tep1 > tep2)	
				{
							
					tmp2 = filearray[i];
					filearray[i] = filearray[j];	
					filearray[j] = tmp2;						
				}	
			}
		}		
		
		aa=[];
		
		for(var a=0;a<folderfile.length;a++)
		{
			aa.push(folderfile[a]);	
		}
		
		for(var b=0;b<filearray.length;b++)
		{
			filearray[b][2] = file_size_unit(filearray[b][2]);	
			aa.push(filearray[b]);		
		}
		
		for(var c=0;c<noknowfile.length;c++)
		{
			noknowfile[c][2] = file_size_unit(noknowfile[c][2]);	
			aa.push(noknowfile[c]);		
		}	
	}	
	
	if (getSortmod == "file_size")
	{
		var tmp_size = new Array();
		
		for(var i=0;i<filearray.length;i++)
		{
			tmp_size.push(filearray[i]);		
		}
		for(var i=0;i<noknowfile.length;i++)
		{
			tmp_size.push(noknowfile[i]);		
		}
		
		for(var i=0;i<tmp_size.length;i++)
		{			
			var tep1 = tmp_size[i][2];
			for(var j=0;j<i;j++)
			{
				var tep2 = tmp_size[j][2];		
				if (parseInt(tep1)> parseInt(tep2))	
				{
					tmp2 = tmp_size[i];
					tmp_size[i] = tmp_size[j];	
					tmp_size[j] = tmp2;	
				}	
			}
		}
		aa=[];		
		for(var i=0;i<folderfile.length;i++)
		{
			aa.push(folderfile[i]);	
		}
		
		for(var i=0;i<tmp_size.length;i++)
		{
			tmp_size[i][2] = file_size_unit(tmp_size[i][2]);	
			aa.push(tmp_size[i]);	
		}
	}	
	
	if (getSortmod == "file_alphabet")
	{
			var tmp_alp = new Array();
			
			for(var i=0;i<filearray.length;i++)
			{
				tmp_alp.push(filearray[i]);		
			}
			for(var i=0;i<noknowfile.length;i++)
			{
				tmp_alp.push(noknowfile[i]);		
			}
			
			for(var i=0;i<tmp_alp.length;i++)
			{			
				var tep1 = SpecSymbol1(tmp_alp[i][0]).toLowerCase();
				for(var j=0;j<i;j++)
				{
					var tep2 = SpecSymbol1(tmp_alp[j][0]).toLowerCase();										
					if (tep1 < tep2)	
					{
						tmp2 = tmp_alp[i];
						tmp_alp[i] = tmp_alp[j];	
						tmp_alp[j] = tmp2;	
					}	
				}
			}				
			
			aa=[];
			for(var i=0;i<folderfile.length;i++)
			{
				aa.push(folderfile[i]);	
			}			
		
			for(var i=0;i<tmp_alp.length;i++)
			{	
				tmp_alp[i][2] = file_size_unit(tmp_alp[i][2]);	
				aa.push(tmp_alp[i]);	
			}		
	}	
		
	if (getSortmod == "file_date")
	{
		var tmp_date = new Array();
			
		for(var i=0;i<filearray.length;i++)
		{
			tmp_date.push(filearray[i]);		
		}
		for(var i=0;i<noknowfile.length;i++)
		{
			tmp_date.push(noknowfile[i]);		
		}
		
		for(var i=0;i<tmp_date.length;i++)
		{			
			
			var tep1 = SpecSymbol1(tmp_date[i][0]).toLowerCase();			
			
			for(var j=0;j<i;j++)
			{
				var tep2 = SpecSymbol1(tmp_date[j][0]).toLowerCase();		
				
				if (tep1 > tep2)	
				{
					tmp2 = tmp_date[i];
					tmp_date[i] = tmp_date[j];	
					tmp_date[j] = tmp2;	
				}	
			}
		}		
		
		
		sortTime(folderfile);
		sortTime(tmp_date);
		
		aa=[];		
		for(var i=0;i<folderfile.length;i++)
		{
			aa.push(folderfile[i]);	
		}
		
		for(var i=0;i<tmp_date.length;i++)
		{	
			tmp_date[i][2] = file_size_unit(tmp_date[i][2]);	
			aa.push(tmp_date[i]);	
		}		
	}	
	
}

function sortTime(folderName)
{		
		
	  var foler_len = folderName.length;		
		
		for(var a=0;a<foler_len;a++)
		{
			
			var tep1 = SpecSymbol1(folderName[a][7]);	
			for(var b=0;b<a;b++)
			{
				var tep2 = SpecSymbol1(folderName[b][7]);		
				
				if (tep1 > tep2)	
				{
					tmp2 = folderName[a];
					folderName[a] = folderName[b];
					folderName[b] = tmp2;
					
				}
			}
		}
		return folderName;		
}

function openFile1(filenames)
{
	
    var openPath = SpecSymbol1(filenames);	
    openPath = decodeURIComponent(filenames);
	var filePath_tmp = parent.document.getElementById("locationPath").value;
	if(filePath_tmp == "/" && openPath == "config")
	{
		location.href = "k_config.html";
		return;
	}
	if (filePath_tmp == "/")
	{
		filePath = filePath_tmp+openPath;
	}
	else{
		filePath = filePath_tmp+"/"+openPath;
	}
    <!--alert(filePath);-->
	
	$.ajax({
      url: "/file_path.html",
      type: "POST",
      data: { 
      	page:"ajax.html",
        srcNumber:"0",
        action:"listFile",
        tmp_fileName:openPath,
        usb_default_path:usb_default_path,
        usb_file_path:filePath
      },
      error: function(xhr) {
      	parent.window.location.href="index.html";
      },
      success: function(response) {    
      	parent.window.location.href="index.html";    
      	  	
      	/*
      	parent.document.nosave_form.locationPath.value = filePath;
      	parent.ifrmarea.location = "file_path.html"; 
      	*/ 
      }
    }
   );
  //parent.document.getElementById("openfileMark").style.display="";
}


function openWindow(obj) { 
    obj = unescape(obj);
	var webip = obj.split(",")[0];
	var linkvalue = obj.split(",")[1];
	
	var downloadMask = parent.document.getElementById("PlayCheckMod").value;
	if(downloadMask == "cancel")
	{		
		if(eval("document.getElementById(\"checkbox_"+(linkvalue)+"\").checked") == false){
			eval("document.getElementById(\"checkbox_"+(linkvalue)+"\").checked = true");
			eval("document.getElementById(\"checkbox2_"+(linkvalue)+"\").src = \"/images/select_02.png\"");		
			enableDownload();
		}
		else{
			eval("document.getElementById(\"checkbox_"+(linkvalue)+"\").checked = false");
			eval("document.getElementById(\"checkbox2_"+(linkvalue)+"\").src = \"/images/select_01.jpg\"");		
			enableDownload();
		}
	}
	if (downloadMask == "select")
	{		
		<!--var winname = window.open(encodeURI(obj), '', 'height=400,width=500,top=200,left=300'); -->
		var winname = window.open(webip, '', 'height=400,width=500,top=200,left=300'); 
	}	
	
	/*
	var downloadMask = parent.document.getElementById("PlayCheckMod").value;
	if(downloadMask == "cancel")
	{		
		eval("document.getElementById(\"checkbox_"+(linkvalue)+"\").checked = true");
		eval("document.getElementById(\"checkbox2_"+(linkvalue)+"\").src = \"/images/select_02.png\"");		
	}
	if (downloadMask == "select")
	{		
		<!--var winname = window.open(encodeURI(obj), '', 'height=400,width=500,top=200,left=300'); -->
		var winname = window.open(webip, '', 'height=400,width=500,top=200,left=300'); 
	}	
	*/
} 

var linkvalue = 0;
function addIcon(i)
{	
	var filenames = SpecSymbol1(aa[i][0]);
	var filepath_tmp = "<%NvramGet_s("usb_file_path");%>";
	
	if(filepath_tmp == "/")
	{
		filepath_tmp="";
	}		
    filepath_tmp = encodeURI(filepath_tmp);
	//http://192.168.200.254/media/SD_Card1/aaa.mp3
	var samba_path = "http://"+lanip+"/media"+filepath_tmp+"/"+filenames;
	filenames = filenames.toLowerCase();
	var checkFolder = aa[i][1];
		
	var filepath = "http://"+lanip+"/app"+filepath_tmp;
	
	var checkwebStyle = "AutoSkip1";


	if (changelistmod == 'mode_list')
	{		
			if (checkFolder.charAt(0) == 'd'){		
				var foldertext = '<%GetString("showfile","6");%>';	
				var addmap = "<li><a href=\"javascript: void(0)\" onclick=\"openFile1('"+aa[i][0]+"');\" ><div class='content-icon icn-folder'></div><h2>"+decodeURIComponent(aa[i][0])+"</h2></a></li>";
				return addmap
			}	
			else if(filenames.lastIndexOf(".jpg")>0 || filenames.lastIndexOf(".eps")>0 || filenames.lastIndexOf(".png")>0 || filenames.lastIndexOf(".bmp")>0 || filenames.lastIndexOf(".gif")>0 )			
			{
				linkvalue = linkvalue+1;
				var sendInamg = SpecSymbol1(aa[i][0])+","+filepath +","+ linkvalue;
				
				var filetype = filenames.substring((filenames.lastIndexOf("."))+1,filenames.length);	
				var addmap = "<li><a href=\""+samba_path+"\" ><div class='content-icon icn-photo'></div><h3>"+decodeURIComponent(aa[i][0])+"<p>"+aa[i][2]+"</p></h3></a></li>";
				return addmap;						
			}
			else if(filenames.lastIndexOf(".tif")>0  || filenames.lastIndexOf(".tiff")>0)			
			{
				var warning = '<%GetString("showfile","5");%>';	
				linkvalue = linkvalue+1;
				var sendInamg = SpecSymbol1(aa[i][0])+","+filepath +","+ linkvalue;
				
					var filetype = filenames.substring((filenames.lastIndexOf("."))+1,filenames.length);	
					var addmap = "<li><a href=\""+samba_path+"\" ><div class='content-icon icn-photo'></div><h2>"+decodeURIComponent(aa[i][0])+"<p>"+aa[i][2]+"</p></h3></a></li>"
					return addmap;					
			}
			else if(filenames.lastIndexOf(".mp3")>0 || filenames.lastIndexOf(".aif")>0 || filenames.lastIndexOf(".m4a")>0  || filenames.lastIndexOf(".wma")>0 || filenames.lastIndexOf(".wav")>0 || filenames.lastIndexOf(".aiff")>0 || filenames.lastIndexOf(".aac")>0)
			{
				linkvalue = linkvalue+1;
				<!--var webip = "http://"+lanip+"/app"+SpecSymbol1(filepath_tmp)+"/"+SpecSymbol1(aa[i][0])+","+linkvalue;-->
				var webip = "http://"+lanip+"/app"+filepath_tmp+"/"+SpecSymbol1(aa[i][0])+","+linkvalue;
				
				var filetype = filenames.substring((filenames.lastIndexOf("."))+1,filenames.length);	
				var addmap = "<li><a href=\""+samba_path+"\" ><div class='content-icon icn-music'></div><h2>"+decodeURIComponent(aa[i][0])+"<p>"+aa[i][2]+"</p></h3></a></li>";
				return addmap;		
			}
			else if(filenames.lastIndexOf(".m4v")>0 || filenames.lastIndexOf(".mpg")>0 || filenames.lastIndexOf(".3gp")>0 || filenames.lastIndexOf(".avi")>0 || filenames.lastIndexOf(".mp4")>0 || filenames.lastIndexOf(".mpeg")>0 || filenames.lastIndexOf(".mov")>0 || filenames.lastIndexOf(".wmv")>0 || filenames.lastIndexOf(".motion")>0 || filenames.lastIndexOf(".jpeg")>0)
			{
				linkvalue = linkvalue+1;
				<!--var webip = "http://"+lanip+"/app"+SpecSymbol1(filepath_tmp)+"/"+SpecSymbol1(aa[i][0])+","+linkvalue;-->
				var webip = "http://"+lanip+"/app"+filepath_tmp+"/"+SpecSymbol1(aa[i][0])+","+linkvalue;
				
				var filetype = filenames.substring((filenames.lastIndexOf("."))+1,filenames.length);	
				var addmap = "<li><a href=\""+samba_path+"\" ><div class='content-icon icn-video'></div><h2>"+decodeURIComponent(aa[i][0])+"<p>"+aa[i][2]+"</p></h3></a></li>";
				return addmap;		
			}	
			else if(filenames.lastIndexOf(".txt")>0 || filenames.lastIndexOf(".log")>0 || filenames.lastIndexOf(".pdf")>0 ||filenames.lastIndexOf(".doc")>0 || filenames.lastIndexOf(".docx")>0 || filenames.lastIndexOf(".xls")>0 || filenames.lastIndexOf(".xlsx")>0 || filenames.lastIndexOf(".ppt")>0 || filenames.lastIndexOf(".pptx")>0 || filenames.lastIndexOf(".iwork")>0)
			{
				linkvalue = linkvalue+1;
				<!--var webip = "http://"+lanip+"/app"+SpecSymbol1(filepath_tmp)+"/"+SpecSymbol1(aa[i][0])+","+linkvalue;-->
				var webip = "http://"+lanip+"/app"+filepath_tmp+"/"+SpecSymbol1(aa[i][0])+","+linkvalue;
				
				var filetype = filenames.substring((filenames.lastIndexOf("."))+1,filenames.length);	
				var addmap = "<li><a href=\""+samba_path+"\" ><div class='content-icon icn-document'></div><h2>"+decodeURIComponent(aa[i][0])+"<p>"+aa[i][2]+"</p></h3></a></li>";
				return addmap;		
			}	
			else
			{
				linkvalue = linkvalue+1;
				<!--var webip = "http://"+lanip+"/app"+SpecSymbol1(filepath_tmp)+"/"+SpecSymbol1(aa[i][0])+","+linkvalue;-->
				var webip = "http://"+lanip+"/app"+filepath_tmp+"/"+SpecSymbol1(aa[i][0])+","+linkvalue;
				
				var filetype = "Unknow";
				var addmap = "<li><a href=\""+samba_path+"\" ><div class='content-icon '></div><h2>"+decodeURIComponent(aa[i][0])+"<p>"+aa[i][2]+"</p></h3></a></li>";
				return addmap;	
			}
	}
}

function sendImageName(filenames)
{		
	var downloadMask = parent.document.getElementById("PlayCheckMod").value;
	
	var imgpath = filenames.split(",")[1];
	var imgname = filenames.split(",")[0];

	if(downloadMask == "cancel")
	{
		var linkvalue = filenames.split(",")[2];

		if(eval("document.getElementById(\"checkbox_"+(linkvalue)+"\").checked") == false){
			eval("document.getElementById(\"checkbox_"+(linkvalue)+"\").checked = true");
			eval("document.getElementById(\"checkbox2_"+(linkvalue)+"\").src = \"/images/select_02.png\"");		
			enableDownload();
		}
		else{
			eval("document.getElementById(\"checkbox_"+(linkvalue)+"\").checked = false");
			eval("document.getElementById(\"checkbox2_"+(linkvalue)+"\").src = \"/images/select_01.jpg\"");		
			enableDownload();
		}
	}
	if (downloadMask == "select")
	{
		parent.document.getElementById("playImagetype").value	= "single";  
		document.getElementById("playImageName").value	= imgname;  
	  sendimage()		 
	}
	
}

function sendimage()
{	
	var lanip = '<%NvramGet("LanIPAddr");%>';	
	//var filepath_tmp = parent.document.nosave_form.locationPath.value;
	var filepath_tmp = "<%NvramGet_s("usb_file_path");%>";
	
	if(filepath_tmp == "/")
	{
		filepath_tmp="";
	}	
    filepath_tmp = encodeURI(filepath_tmp);
    <!--alert(filepath_tmp);-->
	
	//var send_filepath = "http://"+lanip+":60006/content"+filepath_tmp;

	var send_filepath = "http://"+lanip+"/app"+filepath_tmp;
    <!--alert(send_filepath);-->
	var playNumber=0;
	
	var sendImagArr = new Array();
	var sendImagPathArr = new Array();
	var sendImagArr2 = new Array();
	var sendImagPath2 = new Array();	
		
	for(var i=0;i<aa.length;i++)
		{
				var foldermod = aa[i][1];
				if(foldermod.charAt(0) != 'd')
				{
					sendImagArr2.push(aa[i][0]);
					sendImagPath2.push(send_filepath);
				}			
		}
		
	var playtype = parent.document.getElementById("playImagetype").value;  
	if(	playtype == "single")
	{

			var tmp_value = document.getElementById("playImageName").value.split(",");
			var filenames = tmp_value[0];
			var fiePath = tmp_value[1];

			sendImagArr = [];
			sendImagPathArr = [];
			
			for(var i=0;i<sendImagArr2.length;i++)
			{				
				var aaNames = sendImagArr2[i].toLowerCase();				
				
				if(userAgent.indexOf("safari") >0 && userAgent.indexOf("chrome") == -1 && userAgent.indexOf("android") == -1)
				{
					if(aaNames.lastIndexOf(".jpg")>0 || aaNames.lastIndexOf(".eps")>0 || aaNames.lastIndexOf(".tif")>0 || aaNames.lastIndexOf(".png")>0 || aaNames.lastIndexOf(".bmp")>0 || aaNames.lastIndexOf(".gif")>0 || aaNames.lastIndexOf(".tiff")>0)			
					{				
						sendImagArr.push(sendImagArr2[i]);						
						sendImagPathArr.push(sendImagPath2[i]);
					}
				}
				
				else{
					if(aaNames.lastIndexOf(".jpg")>0 || aaNames.lastIndexOf(".eps")>0 || aaNames.lastIndexOf(".png")>0 || aaNames.lastIndexOf(".bmp")>0 || aaNames.lastIndexOf(".gif")>0)			
					{				
						sendImagArr.push(sendImagArr2[i]);						
						sendImagPathArr.push(sendImagPath2[i]);
					}					
				}
				
			}	

			if (sendImagArr.length >0)
			{				
				for(var i=0;i<sendImagArr.length;i++)
				{
					var sendNames = sendImagArr[i].toLowerCase();
					if(sendNames == filenames.toLowerCase()){
						playNumber=i;
						break;
					}			
				}
			}
	}
	if(	playtype == "continuous"){
		
			var checktif = "false";
			for(var a=0;a<count_check;a++)
			{
					var tmp_check = eval("document.getElementById(\"checkbox_"+(a+1)+"\").checked");
					var aaNames = sendImagArr2[a].toLowerCase();
					
					if(tmp_check == true)
					{	
						
						if(userAgent.indexOf("safari") >0 && userAgent.indexOf("chrome") == -1 && userAgent.indexOf("android") == -1)
						{
							if(aaNames.lastIndexOf(".jpg")>0 || aaNames.lastIndexOf(".eps")>0 || aaNames.lastIndexOf(".tif")>0 || aaNames.lastIndexOf(".png")>0 || aaNames.lastIndexOf(".bmp")>0 || aaNames.lastIndexOf(".gif")>0 || aaNames.lastIndexOf(".tiff")>0)			
							{
								sendImagArr.push(sendImagArr2[a]);						
								sendImagPathArr.push(sendImagPath2[a]);
							}
						}
						
						else{
							if(aaNames.lastIndexOf(".jpg")>0 || aaNames.lastIndexOf(".eps")>0 || aaNames.lastIndexOf(".png")>0 || aaNames.lastIndexOf(".bmp")>0 || aaNames.lastIndexOf(".gif")>0)			
							{
								sendImagArr.push(sendImagArr2[a]);						
								sendImagPathArr.push(sendImagPath2[a]);
							}
							if(aaNames.lastIndexOf(".tif")>0 || aaNames.lastIndexOf(".tiff")>0)
							{
								checktif = "true";	
							}							
						}
						
						if( aaNames.lastIndexOf(".m4v")>0 || aaNames.lastIndexOf(".mpg")>0 || aaNames.lastIndexOf(".3gp")>0 || aaNames.lastIndexOf(".avi")>0 || aaNames.lastIndexOf(".mp4")>0 || aaNames.lastIndexOf(".mpeg")>0 || aaNames.lastIndexOf(".mov")>0 || aaNames.lastIndexOf(".motion")>0 || aaNames.lastIndexOf(".wmv")>0 >0)			
                        {
							send_filepath = sendImagPath2[a]+"/"+sendImagArr2[a];
                            <!--openWindow(send_filepath);-->
							var winname = window.open(send_filepath, '', 'height=400,width=500,top=200,left=300'); 
                        }
						if(aaNames.lastIndexOf(".mp3")>0 || aaNames.lastIndexOf(".aif")>0 || aaNames.lastIndexOf(".m4a")>0 || aaNames.lastIndexOf(".wma")>0 || aaNames.lastIndexOf(".wav")>0  || aaNames.lastIndexOf(".aiff")>0 || aaNames.lastIndexOf(".aac")>0)			
						{
							
							send_filepath = sendImagPath2[a]+"/"+sendImagArr2[a];
                            <!--alert(send_filepath);-->
                            var element = document.createElement("input");
                            var type = "checkbox";
                            var name = "sport[]";
                            var value = send_filepath;

                            //Assign different attributes to the element.
                            element.setAttribute("type", type);
                            element.setAttribute("value", value);
                            element.setAttribute("name", name);
							<!--openWindow(send_filepath);-->
                            var foo = document.getElementById("MusicPlaylist");
                             
                            //Append the element in page (in span).
                            foo.appendChild(element);
                            element.setAttribute("checked", true);
                            element.setAttribute("style", "display:none");
						}				
					}			
			}	
			
			var playType = "continuous";
			playNumber = 0;
	}
    var foo = document.getElementById("MusicPlaylist");
    if ( foo.hasChildNodes() ) {
        foo.submit();
        while ( foo.childNodes.length >= 1 ) {
            foo.removeChild( foo.firstChild );       
        } 
    }
	
	var warning = '<%GetString("kindex","30");%>';
	if(checktif == "true"){
			alert(warning);
	}	
	if (sendImagArr.length == 0 || sendImagPathArr.length == 0)
	{
		//alert(warning);
	}	
	else{
		sendImagArr.push(playType);
		parent.document.nosave_form.playNumber.value = playNumber;
		parent.document.nosave_form.playPicture.value = sendImagArr;
		parent.document.nosave_form.playPicturePath.value = sendImagPathArr;
		parent.showPicTable();
	}
    <!--alert("not bad");-->
}
function back_folder()
{
	var openPath;
	var filePath_tmp = document.getElementById("locationPath").value;
	if (filePath_tmp == "/")
	{
		filePath = filePath_tmp;
	}
	else{
		if(filePath_tmp.lastIndexOf('/')==0)
			filePath = "/";
		else
			filePath = filePath_tmp.substring(0,filePath_tmp.lastIndexOf('/'));
	}
	
	$.ajax({
      url: "/file_path.html",
      type: "POST",
      data: { 
      	page:"ajax.html",
        srcNumber:"0",
        action:"listFile",
        tmp_fileName:openPath,
        usb_default_path:usb_default_path,
        usb_file_path:filePath
      },
      error: function(xhr) {
      	parent.window.location.href="index.html";
      },
      success: function(response) {    
      	parent.window.location.href="index.html";
      }
    }
   );
}
function back_usb_path(filePath_tmp)
{
	var openPath;
	filePath = filePath_tmp;
	$.ajax({
      url: "/file_path.html",
      type: "POST",
      data: { 
      	page:"ajax.html",
        srcNumber:"0",
        action:"listFile",
        tmp_fileName:openPath,
        usb_default_path:usb_default_path,
        usb_file_path:filePath
      },
      error: function(xhr) {
      	parent.window.location.href="index.html";
      },
      success: function(response) {    
      	parent.window.location.href="index.html";
      }
    }
   );
}
function usb_path()
{
	var usb_path='<%NvramGet("usb_file_path");%>';
	var usb_table = new Array();
	var i=0;
	while(usb_path.indexOf("/",i) >= 0)
	{
		var i2 = usb_path.indexOf("/",i+1);
		if(i2 > 0)
		{
			usb_table.push("<li>/ <a href=\"#\" onClick=\"back_usb_path('"+usb_path.substring(0,i2)+"');\">"+usb_path.substring(i+1,i2)+"</a></li>");	
			i = i2;
		}
		else if(i2 == i)
		{
			usb_table.push("<li>/ </li>");
			break;	
		}
		else if(i2 < 0)
		{	
			usb_table.push("<li>/ <a href=\"#\" class=\"active\" onClick=\"back_usb_path('"+usb_path+"');\">"+usb_path.substring(i+1,usb_path.length)+"</a></li>");
			break;	
		}		
	}
	document.getElementById("show_usb_path").innerHTML = usb_table.join("");
}

function Checkvalue(){		
			
  if (document.getElementById("WIFISsid1").value == "")
  {
      alert('<%GetString("kindex","20");%>');
      return false;
  }
	/*
  if (document.getElementById("SecurityMode").selectedIndex == 1)
  {
    Password = document.getElementById("Password").value ;
    Password1= document.getElementById("Password1").value ;
    
    if (Password.length != 13) {
      alert('<%GetString("kindex","21");%>');
      return false;
    }
    
    if (Password != Password1) {
      alert('<%GetString("kindex","22");%>');
      return false;
    }
  } else
  */
  if (document.getElementById("SecurityMode").selectedIndex != 0)
  {
    Password = document.getElementById("Password").value ;
    Password1= document.getElementById("Password1").value ;
    if (Password.length < 8) {
      alert('<%GetString("kindex","23");%>');
      return false;
    }
    if (Password != Password1) {
      alert('<%GetString("kindex","22");%>');
      return false;
    }
  }
  
  Password = document.getElementById("Password").value ;
  var securitymode = document.getElementById("SecurityMode").selectedIndex;
  if(securitymode == "0"){
  		document.getElementById("id_WIFIAuthType1").value="OPEN";
  		document.getElementById("id_WIFIEncrypType1").value="NONE";
  		document.getElementById("id_WiSecurity_on").value="0";
  		document.getElementById("id_WiSecurity_off").value="1";
  		document.getElementById("id_WIFIWPAPSK1").value="";
  }else if(securitymode == "WEP"){
  		document.getElementById("id_WIFIAuthType1").value="OPEN";
  		document.getElementById("id_WIFIEncrypType1").value="WEP";
  		document.getElementById("id_WiSecurity_on").value="1";
  		document.getElementById("id_WiSecurity_off").value="0";
  		document.getElementById("id_WIFIWPAPSK1").value=Password;  	
 	}else if(securitymode == "WPA"){
  		document.getElementById("id_WIFIAuthType1").value="WPAPSK";
  		document.getElementById("id_WIFIEncrypType1").value="TKIP";
  		document.getElementById("id_WiSecurity_on").value="1";
  		document.getElementById("id_WiSecurity_off").value="0";
  		document.getElementById("id_WIFIWPAPSK1").value=Password;  	
 	}else if(securitymode == "WPA2"){
  		document.getElementById("id_WIFIAuthType1").value="WPA2PSK";
  		document.getElementById("id_WIFIEncrypType1").value="AES";
  		document.getElementById("id_WiSecurity_on").value="1";
  		document.getElementById("id_WiSecurity_off").value="0";
  		document.getElementById("id_WIFIWPAPSK1").value=Password;  	
 	}else{
 			document.getElementById("id_WIFIAuthType1").value="WPAPSKWPA2PSK";
  		document.getElementById("id_WIFIEncrypType1").value="TKIPAES";
  		document.getElementById("id_WiSecurity_on").value="1";
  		document.getElementById("id_WiSecurity_off").value="0";
  		document.getElementById("id_WIFIWPAPSK1").value=Password;  		
 	}
  

  if (document.getElementById("ImageVisability").checked != true)
      document.getElementById("id_WIFIHideSSID1").value = "1";
  else
      document.getElementById("id_WIFIHideSSID1").value = "0";

  var apcli_select = document.getElementById("ddl-network").options[document.getElementById("ddl-network").selectedIndex] ;
  if(apcli_select.value.search("_pw_") >= 0 )
  {
  	
  	var apcli_ssid = apcli_select.value.slice(0,apcli_select.value.search("_pw_"));
	var apcli_auth;
	var apcli_Encryp;
	if(apcli_select.value.slice(apcli_select.value.search("_pw_")+4,apcli_select.value.length).search("/") == -1)
		apcli_auth = apcli_select.value.slice(apcli_select.value.search("_pw_")+4,apcli_select.value.length);
	else
	{
		apcli_auth = apcli_select.value.slice(apcli_select.value.search("_pw_")+4,apcli_select.value.lastIndexOf("/"));
		apcli_Encryp = apcli_select.value.slice(apcli_select.value.lastIndexOf("/")+1,apcli_select.value.length);
	}
  	document.getElementById("id_WIFIApCliEnable").value = "1";
	document.getElementById("id_WIFIApCliSsid").value = apcli_ssid;
	if(apcli_auth == "WEP")
	{
		document.getElementById("id_WIFIApCliAuthMode").value = "OPEN";
		document.getElementById("id_WIFIApCliEncrypType").value = "WEP";
	}
	
	if(apcli_auth == "WPA1PSKWPA2PSK")
		document.getElementById("id_WIFIApCliAuthMode").value = "WPAPSKWPA2PSK";
	else if(apcli_auth == "WPA2PSK")
		document.getElementById("id_WIFIApCliAuthMode").value = "WPA2PSK";
	else if(apcli_auth == "WPAPSK")
		document.getElementById("id_WIFIApCliAuthMode").value = "WPAPSK";
		
	if(apcli_Encryp == "TKIPAES")
		document.getElementById("id_WIFIApCliEncrypType").value = "TKIPAES";
	else if(apcli_Encryp == "TKIP")
		document.getElementById("id_WIFIApCliEncrypType").value = "TKIP";
	else if(apcli_Encryp == "AES")
		document.getElementById("id_WIFIApCliEncrypType").value = "AES";
		
	if(apcli_auth == "WEP")
	{
		if(document.getElementById("network-password").value.length < 1)
			alert("no password");
		else
		{
			if(document.getElementById("network-password").value.length ==5 
			|| document.getElementById("network-password").value.length == 13)
			{
				document.getElementById("id_WIFIApCliKey1Type").value = "1";
			}
			else
				document.getElementById("id_WIFIApCliKey1Type").value = "0";
		}
	}
	else if(document.getElementById("network-password").value.length < 8)
	{
		alert('<%GetString("kwifidriv","28");%>');
		return false;
	}
	document.getElementById("id_WIFIApCliWPAPSK").value = document.getElementById("network-password").value;
	document.getElementById("id_WIFIApCliKey1Str").value = document.getElementById("network-password").value;
  }
  else
  {
  	document.getElementById("id_WIFIApCliEnable").value = "1";
	document.getElementById("id_WIFIApCliSsid").value = apcli_select.value;
	document.getElementById("id_WIFIApCliAuthMode").value = "OPEN";
	document.getElementById("id_WIFIApCliEncrypType").value = "NONE";
  }
  
  document.getElementById("id_shutdown").value = document.getElementById("shutdown").value;
  
	onDone();
}


function SpecSymbol1(value)
{
	var tmp_split = new Array();
	tmp_split = value.split("");
	var tmp_value="";
	
	for(var a=0;a<tmp_split.length;a++)
	{
		
		if(tmp_split[a] == "\'" )
		{
			tmp_value = tmp_value+"\\"+tmp_split[a];
			
		}
		else{
			
			tmp_value = tmp_value+tmp_split[a];
		}
	}
	return tmp_value;
}

function SpecSymbol2(value)
{
	var tmp_split = new Array();
	tmp_split = value.split("");
	var tmp_value="";
	
	for(var a=0;a<tmp_split.length;a++)
	{
		
		if(tmp_split[a] == '\"' )
		{
			tmp_value = tmp_value+"\\"+tmp_split[a];
			
		}
		else{
			
			tmp_value = tmp_value+tmp_split[a];
		}
	}
	return tmp_value;
}

function onDone(){
	
	//document.getElementById("form_wi_drive_settings").ImageVisability = document.getElementById("id_WIFIHideSSID1").value;	
	document.getElementById("form_wi_drive_settings").submit();	
}
function upgrade()
{
	document.getElementById("do_upgrade").submit();
}

function runScript(e) {
    if (e.keyCode == 13) {
        Checkvalue();
    }
}

function ConnectStatus()
{
	
	$.ajax({
    url: "/setup.html",
    type: "POST",
    data: {    
      action:"wifigetConnect"
    },
    error: function(xhr) {
    },
    success: function(response) { 
 			var tmp = Array();
  		var tmp = response.split(",");
  		var obj = document.getElementById("ddl-network");
  		if(tmp.length == 4){    				
  			
		    var ssid = tmp[0];
				var getconnValue = tmp[1];
				var getchannel = tmp[2];
				var getWANIP = tmp[3];
				if(getconnValue == "1" && getWANIP != "" && getWANIP != "0.0.0.0")
				{
					for(var i = 0, j = obj.options.length; i < j; i++) {
						var tmp_value = obj.options[i].value;
						if(tmp_value.lastIndexOf("_pw_"))
							tmp_value = tmp_value.slice(0,tmp_value.lastIndexOf("_pw_"));						
						
				        if(tmp_value == ssid || obj.options[i].value == ssid) {
				           obj.selectedIndex = i;
				           document.getElementById("showWANIP").style.display="";
				           document.getElementById("addWANIP").innerHTML = getWANIP;
				           if(getchannel.length != 0)
				           		document.getElementById("WIFIChannel").selectedIndex = getchannel-1;
				           else
				           		document.getElementById("WIFIChannel").selectedIndex = '<%NvramGet("WIFIChannel");%>'-1;
				           break;
				        }
				    }
				}
				else
				{
						document.getElementById("WIFIChannel").selectedIndex = '<%NvramGet("WIFIChannel");%>'-1;
						document.getElementById("ddl-network").selectedIndex = 0;	
				}
			}else		
			{
				document.getElementById("WIFIChannel").selectedIndex = '<%NvramGet("WIFIChannel");%>'-1;			
				document.getElementById("ddl-network").selectedIndex = 0;			
			}
    }
  }
  );    
}

function Init()
{	 	 
	/* check navigation */
	if (userAgent.indexOf("android") >0 || userAgent.indexOf("iphone") >0 || userAgent.indexOf("ipad") >0 ){		
		document.getElementById("settings").className="settings-panel_mobile hidden";
		document.getElementById("ddl-network").className="midd-select";
		
	}
	else{
		document.getElementById("settings").className="settings-panel hidden";
		document.getElementById("ddl-network").className="";
	}	
	/* check navigation end */	
	
	var init_ssid3= "<%NvramGet_s("WIFISsid1");%>";	
	init_ssid = SpecSymbol2(init_ssid3);
	document.getElementById("WIFISsid1").value = init_ssid3;
	//var num = document.getElementById("back_butten").href.lastIndexOf('/');
	ConnectStatus();
	
	usb_path();
	filesort();
	create_table_plan();
	//var num = document.getElementById("back_butten").href.lastIndexOf('/');
	if("<%NvramGet("WIFIHideSSID1");%>" == "0")
		document.getElementById("ImageVisability").checked = true;

	
	/* change battery usage image */
		var battery_value = '<%NvramGet("battery");%>';
		if(battery_value == "3")
				document.getElementById("setting-battery").className = "setting-values icn-battery-high ir";
		else if (battery_value == "2")
				document.getElementById("setting-battery").className = "setting-values icn-battery-mid ir";
		else		
				document.getElementById("setting-battery").className = "setting-values icn-battery-low ir";
	/* battery image end*/
	
	var SecurityMode_num = '<%NvramGet("SecurityMode");%>';
	if(SecurityMode_num == 4)
		document.getElementById("SecurityMode").selectedIndex = 1;
	/*
		document.getElementById("SecurityMode").selectedIndex = 1;
	else if(SecurityMode_num == 2)
		document.getElementById("SecurityMode").selectedIndex = 2;
	else if(SecurityMode_num == 1)
		document.getElementById("SecurityMode").selectedIndex = 1;
	*/	
	else
		document.getElementById("SecurityMode").selectedIndex = 0;
		
	var shutdown_num = '<%NvramGet("shutdown_time");%>';
	if(shutdown_num == "30")
		document.getElementById("shutdown").selectedIndex = 1;
	else if(shutdown_num == "60")
		document.getElementById("shutdown").selectedIndex = 2;
	else if(shutdown_num == "120")
		document.getElementById("shutdown").selectedIndex = 3;
	else if(shutdown_num == "180")
		document.getElementById("shutdown").selectedIndex = 4;
	else if(shutdown_num == "240")
		document.getElementById("shutdown").selectedIndex = 5;
	else if(shutdown_num == "300")
		document.getElementById("shutdown").selectedIndex = 6;
	else
		document.getElementById("shutdown").selectedIndex = 0;
		
		
	
	$('#ImageVisability, #SecurityMode, #ddl-network').trigger('change');
}

//-->
</script>
	</head>

	<body onLoad="Init();" onkeypress="runScript(event)">
	<div class="ktc-logo ir"><%GetString("kindex","1");%></div>

	<div class="body">
	<form method="POST" name="filePathForm">
		<div class="navigation">
			<ul class="main-nav">
				<div id="show_usb_path"></div>
			</ul>
			<a class="btn-settings ir lightbox" href="#settings"><%GetString("kindex","2");%></a></div>

		<ul class="drive-content">
	
			<div id="show_table"></div>
			<input type="hidden" name="playImagePath" id="playImagePath">
			<input type="hidden" name="playImageName" id="playImageName">
			<input type="hidden" name="locationPath" id="locationPath" value="<%NvramGet_s("usb_file_path");%>" onKeyDown="return false">
			<input type="hidden" name="PlayCheckMod" id="PlayCheckMod" >
			<input type="hidden" name="count_check" id="count_check">
		</ul>
	</form>
	</div>

	<!-- Lightbox content -->

	<div id="settings" style="display:none">
	  <div class="navigation">
			<p><%GetString("kindex","2");%></p>
		  <a class="btn-close close ir" href="#close"><%GetString("kindex","26");%></a></div>
			<form name="setup_name" id="form_wi_drive_settings" method="POST">
			<h1><%GetString("kindex","3");%></h1>
			<ul class="settings-content">
				<li>
					<input class="setting-values" id="WIFISsid1" name="WIFISsid1" type="text" value="" maxlength="32" />
					<h2><%GetString("kindex","4");%></h2>
				</li>
				<li>
					<div id="setting-battery"></div>
					<!-- Use classes icn-battery-high, icn-battery-mid or icn-battery-low for batter life indication -->
					<h2><%GetString("kindex","5");%></h2>
				</li>
				<li>
					<p class="setting-values"><%NvramGet("FirmwareVersion");%><!-- (<a href="#" onClick="upgrade();"><%GetString("kindex","7");%></a>)--></p>
					<!-- Upgrade link should only appear when there is an actual firmware update available for this device -->
					<h2><%GetString("kindex","6");%></h2>
				</li>
				<li>
					<div class="setting-values">
						<select class="small-select" id="shutdown" name="shutdown">
							<option value="0">Never</option>
							<option value="30">30mins</option>
							<option value="60">1hr</option>
							<option value="120">2hr</option>
							<option value="180">3hr</option>
							<option value="240">4hr</option>
							<option value="300">5hr</option>
						</select>
					</div>
					<h2><%GetString("kindex","32");%></h2>
				</li>
			</ul>
			<h1><%GetString("kindex","8");%></h1>
			<ul class="settings-content">
				<li>
					<input class="setting-values" type="checkbox" id="ImageVisability" />
					<h3><%GetString("kindex","9");%></h3>
					<p class="cbx-visibility"> </p>
				</li>
				<li>
					<div class="setting-values">
						<select class="small-select" id="WIFIChannel" name="WIFIChannel">
							<option value="1">1</option>
							<option value="2">2</option>
							<option value="3">3</option>
							<option value="4">4</option>
							<option value="5">5</option>
							<option value="6">6</option>
							<option value="7">7</option>
							<option value="8">8</option>
							<option value="9">9</option>
							<option value="10">10</option>
							<option value="11">11</option>
						</select>
					</div>
					<h2><%GetString("kindex","12");%></h2>
				</li>
				<li>
					<div class="setting-values">
						<select class="small-select" id="SecurityMode" name="SecurityMode">
							<option value="0"><%GetString("kindex","14");%></option>
							<!--<option value="1" class="hidden"><%GetString("kindex","15");%></option>
							<option value="2" class="hidden"><%GetString("kindex","16");%></option>-->
							<option value="4"><%GetString("kindex","17");%></option>
						</select>
					</div>
					<h2><%GetString("kindex","13");%></h2>
					<div class="security-password">
						<label for="security-password"><%GetString("kindex","18");%></label><input id="Password" name="Password" type="password" value='<%NvramGet("Password");%>' /><br/>
						<label for="security-password-conf"><%GetString("kindex","19");%></label><input id="Password1" name="Password1" type="password" value='<%NvramGet("Password");%>' />
					</div>
				</li>
			</ul>
			<h1><%GetString("kindex","24");%></h1>
			<ul class="settings-content">
				<li>
					<div class="setting-values">
						<select id="ddl-network">
							<option value="0"></option>
							<!--
							<option selected="selected" value="">None</option>
							<option value="SPY_pw">SPY (Secured with WPA2)</option>
							<option value="SPY-Guest">SPY-Guest</option>
							-->
							<%GetKApCliTable();%>
						</select>
					<!-- If option has "_pw" then show the network password field-->
					</div>
					<h2><%GetString("kindex","25");%></h2>
					<div class="network-password">
						<label for="network-password"><%GetString("kindex","29");%></label><input id="network-password" type="password" value='<%NvramGet("WIFIApCliWPAPSK");%>' />
					</div>
				</li>
				<li id="showWANIP" style="display:none">
					<p class="setting-values"><span id="addWANIP"></span></p>
					<h2><%GetString("kindex","31");%></h2>
				</li>			
			</ul>
			
			<div class="navigation">
				<button class="blue" id="save" onClick="Checkvalue();" type="button"><%GetString("kindex","28");%></button>			
				<button id="cancel" class="close" type="reset"><%GetString("kindex","27");%></button>
			</div>
			<input type="hidden" id="id_KWIFISET" name="KWIFISET" value="SET_WIFI">
			<input type="hidden" id="id_WIFIAutoChannelSelect" name="WIFIAutoChannelSelect" value="0">
			<input type="hidden" id="id_WIFIHideSSID1" name="WIFIHideSSID1" value="">
			<input type="hidden" id="id_WIFIAuthType1" name="WIFIAuthType1" value="">
			<input type="hidden" id="id_WIFIEncrypType1" name="WIFIEncrypType1" value="">
			<input type="hidden" id="id_WiSecurity_on" name="WiSecurity_on" value="0">
			<input type="hidden" id="id_WiSecurity_off" name="WiSecurity_off" value="1">
			<input type="hidden" id="id_WIFIWPAPSK1" name="WIFIWPAPSK1" value="">
			<input type="hidden" id="id_WIFIApCliSsid" name="WIFIApCliSsid" value="">
			<input type="hidden" id="id_WIFIApCliEnable" name="WIFIApCliEnable" value="">
			<input type="hidden" id="id_WIFIApCliBssid" name="WIFIApCliBssid" value="">
			<input type="hidden" id="id_WIFIApCliAuthMode" name="WIFIApCliAuthMode" value="">
			<input type="hidden" id="id_WIFIApCliEncrypType" name="WIFIApCliEncrypType" value="">
			<input type="hidden" id="id_WIFIApCliWPAPSK" name="WIFIApCliWPAPSK" value="">
			<input type="hidden" id="id_WIFIApCliKey1Str" name="WIFIApCliKey1Str" value="">
			<input type="hidden" id="id_WIFIApCliKey1Type" name="WIFIApCliKey1Type" value="">
			<input type="hidden" id="id_Wifi_on" name="Wifi_on" value="1">
			<input type="hidden" id="id_Wifi_off" name="Wifi_off" value="0">
			<input type="hidden" id="id_shutdown" name="shutdown_time" value="0">
		</form>
  </div>
	<form name="setup_name" id="do_upgrade" method="POST">
		<input type="hidden" id="id_upgrade" name="nosave_FW_upgrade" value="1">
	</form>
	<!-- /Lightbox content -->

	</body>
</html>
